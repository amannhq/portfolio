---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import Terminal from '../components/Terminal.astro';
import ProjectCard from '../components/ProjectCard.astro';
import Timeline from '../components/Timeline.astro';
import PostList from '../components/PostList.astro';
import ContactCTA from '../components/ContactCTA.astro';
import SectionHeader from '../components/SectionHeader.astro';
import { SITE, SOCIAL } from '../consts';
import { PROJECTS, EXPERIENCE, SKILLS } from '../data';

const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

const aboutText = `Engineer who believes great software is invisible â€” it just works.
Currently exploring AI-assisted development and distributed systems.`;
---

<Layout title={SITE.title} description={SITE.description}>
  <Hero
    headline="Building software"
    subheadline="that developers love."
    description="Full-stack engineer focused on developer tools, infrastructure, and crafting experiences that feel intuitive and fast."
  />

  <Terminal about={aboutText} skills={SKILLS} />

  <section class="mb-20">
    <SectionHeader
      label="Featured Work"
      title="Projects"
      viewAllHref={SOCIAL.github}
      viewAllText="View all"
    />
    <div class="grid gap-4">
      {PROJECTS.map((project, i) => (
        <ProjectCard project={project} index={i} />
      ))}
    </div>
  </section>

  <section class="mb-20">
    <SectionHeader label="Career" title="Experience" />
    <Timeline items={EXPERIENCE} />
  </section>

  <section class="mb-20">
    <SectionHeader
      label="Latest"
      title="Writing"
      viewAllHref="/blog"
      viewAllText="All posts"
    />
    <PostList posts={posts} />
  </section>

  <ContactCTA />
</Layout>

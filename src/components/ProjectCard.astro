---
import type { Project } from '../data/types';

interface Props {
  project: Project;
  index: number;
}

const { project, index } = Astro.props;
---

<a
  href={project.url}
  target="_blank"
  rel="noopener noreferrer"
  class="project-card animate-fade-in-up"
  style={`animation-delay: ${0.5 + index * 0.1}s;`}
>
  <div class="flex items-start justify-between gap-4">
    <div class="flex-1">
      <div class="mb-2 flex items-center gap-3">
        <h3 class="m-0 text-base font-medium text-[--color-text]">{project.name}</h3>
        <div class="flex gap-1.5">
          {project.tech.slice(0, 2).map((t) => (
            <span class="rounded bg-[--color-bg-tertiary] px-2 py-0.5 text-[10px] font-medium uppercase tracking-wider text-[--color-text-tertiary]">
              {t}
            </span>
          ))}
        </div>
      </div>
      <p class="m-0 text-sm leading-relaxed text-[--color-text-secondary]">
        {project.description}
      </p>
    </div>
    <svg
      class="h-5 w-5 shrink-0 text-[--color-text-tertiary] transition-all group-hover:translate-x-0.5 group-hover:-translate-y-0.5 group-hover:text-[--color-accent]"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      aria-hidden="true"
    >
      <path d="M7 17L17 7M17 7H7M17 7V17"/>
    </svg>
  </div>
</a>

<script>
  const card = document.currentScript?.previousElementSibling as HTMLElement;
  card?.addEventListener('mousemove', (e) => {
    const rect = card.getBoundingClientRect();
    const x = ((e.clientX - rect.left) / rect.width) * 100;
    const y = ((e.clientY - rect.top) / rect.height) * 100;
    card.style.setProperty('--mouse-x', `${x}%`);
    card.style.setProperty('--mouse-y', `${y}%`);
  });
</script>
